\ifnum\subsecno<2 \subsecno=4 \secno=8 \fi

\lingset{glstyle=wrap}

\subsection Bracketing in glosses

\framedisplay[doubleline=true]
\bigskip\noindent
Macros: \idx{|\glbrackets|}, \idx{|\[|}, \idx{|\]|}\par
\parinventory
& \idx{|glbracketsep|}& dimension& |.15em|\cr
%& \idx{|glbrackets|}&& \it pseudo parameter\cr
\endparinventory
\endframedisplay
\medskip

\noindent Sometimes displays like the one below are desired, with
brackets delimiting grammatical constituents.

\smallskip
\framedisplay
\ex[glstyle=multiwrap]
\begingl
\gla Mary$_i$ ist sicher, $[\,$ @ dass es den Hans nicht st\"oren
w\"urde $[\,$ @ seiner Freundin ihr$_i$ Herz auszusch\"utten$\,]]\,.$//
\glb Mary is sure {} that it the Hans not annoy would
{} his girlfriend her heart {out to throw}//
\glft `Mary is sure that to reveal her heart to his girlfriend
would not damage John.'//
\endgl
\xe
\endframedisplay
\smallskip

\noindent Note that the gloss of words following brackets is
aligned with the word, not the bracket.  Note also that some
extra space is inserted between the brackets and the words, and
between adjacent brackets.

One relatively easy way to produce a display like this is to use
the |@| mark to close up the space where needed and math mode to
insert the brackets.  Placeholders (|{}|) must be inserted in the
|\glb| line because the left delimiters are treated as items in
the |\gla| line.  The code used for the above was.

\codedisplay
\ex[glstyle=wrap]
\begingl
\gla Mary$_i$ ist sicher, $[\,$ @ dass es den Hans nicht st\"oren
w\"urde $[\,$ @ seiner Freundin ihr$_i$ Herz
{auszusch\"utten$\,]]\,.$} //
\glb Mary is sure {} that it the Hans not annoy would {} his
girlfriend her heart {out to throw} //
\glft `Mary is sure that to reveal her heart to his girlfriend
would not damage John.'//
\endgl
\xe
|endcodedisplay

\noindent Recall that |\,| inserts a math `thin space' in math
mode. It is not necessary to enclose the last item on the |\gla|
line in brackets, but doing so makes the logic of the code
somewhat clearer.

{\it ExPex\/} provides a way to automate this process without the
need to insert placeholders on the |\glb| line. The code below
produces the display which follows.

\framedisplay
\pex[glstyle=wrap,everygla=,nopreamble]
\glbrackets
\a \begingl       % 59a, p. 237
\gla Fa'nu'i yu' ni \[\[{\it O} t{\it in\/}aitai-mu {\it t\/}\] na
lepblu\].//
\glb show me Obl Op {\it WH\/}[obj].read-agr {} L book//
\glft ``Show me the book that you read.''//
\endgl
\a \begingl       % 82a, p. 247
\gla Um-\"asudda' h\"am yan \[i taotao \[{\it O\/} ni si Juan
ilek-\~na nu guahu \[mal\"agu' gui \[asudd\"a'-\~na {\it
t\/}\]\]\]\].//
\glb agr-meet we with the person Op Comp the Juan say-agr Obl me
agr.want he {\it WH\/}[obl].meet-agr//
\glft ``I met the person who Juan told me he wanted to meet.''//
\endgl
\xe
\endframedisplay

\codedisplay
\pex[glstyle=wrap,everygla=,nopreamble]
\glbrackets
\a \begingl
\gla Fa'nu'i yu' ni \[\[{\it O} t{\it in\/}aitai-mu {\it t\/}\] na
lepblu\].//
\glb show me Obl Op {\it WH\/}[obj].read-agr {} L book//
\glft ``Show me the book that you read.''//
\endgl
\a \begingl
\gla Um-\"asudda' h\"am yan \[i taotao \[{\it O\/} ni si Juan
ilek-\~na nu guahu \[mal\"agu' gui \[asudd\"a'-\~na {\it
t\/}\]\]\]\].//
\glb agr-meet we with the person Op Comp the Juan say-agr Obl me
agr.want he {\it WH\/}[obl].meet-agr//
\glft ``I met the person who Juan told me he wanted to meet.''//
\endgl
\xe
|endcodedisplay
\noindent The examples are adapted from {\it The Design of
Agreement\/} by Sandra Chung.  See (59a) on page 237 and (82a) on
page 247.




%\codedisplay
%\ex[glstyle=wrap]
%\glbrackets
%\begingl
%\gla Mary$_i$ ist sicher, \[dass es den Hans nicht st\"oren
%w\"urde \[seiner Freundin ihr$_i$ Herz
%{auszusch\"utten\]\]\thinspace. //
%\glb Mary is sure that it the Hans not annoy would
%his girlfriend her heart {out to throw} //
%\glft `Mary is sure that to reveal her heart to his girlfriend
%would not damage John.'//
%\endgl
%\xe
%|endcodedisplay
%
%\framedisplay
%\ex[glstyle=wrap]
%\glbrackets
%\begingl
%\gla Mary$_i$ ist sicher, \[dass es den Hans nicht st\"oren
%w\"urde \[seiner Freundin ihr$_i$ Herz
%{auszusch\"utten\]\]\thinspace .} //
%\glb Mary is sure that it the Hans not annoy would
%his girlfriend her heart {out to throw} //
%\glft `Mary is sure that to reveal her heart to his girlfriend
%would not damage John.'//
%\endgl
%\xe
%\endframedisplay
%
%\noindent The choice is of course the user's, but I like to
%insert the |\thinspace| in order to visually separate the period

Executing |\glbrackets| creates commands |\[| and |\]|
which insert the appropriate brackets and space.  The macro that
assembles word-gloss pairs is sensitive to words beginning with
|\[| (or repeated |\[|) and inserts an appropriate space on the
|\glb| line to align the word and gloss properly.

|\glbrackets| can be executed in a gloss by
providing the key-value |everygl=\glbrackets| to |\ex| or
|\begingl|, or explicitly executing |\glbrackets| at the start of
an example, as above.  But a user may prefer to execute
|\glbrackets| at the top level and allow the definitions of |\[|
and |\]| to be global. The user should be aware, however,  that
the dimensions which are used in alignment, the bracket width and
the bracket/word separation, are computed at the point that
|\glbrackets| is executed.  If the font size is changed, as in a
footnote, |\glbrackets| must be executed again in order to get
the spacing correct.

For gloss styles other than |wrap|, the whitespace under brackets
needed for word alignment cannot be inserted automatically.  |\[|
will insert properly spaced brackets, but alignment will be lost.
It is simplest to insert the brackets ``manually''.

\codedisplay
\ex[glstyle=multilevel,glbrackets,moregloffset=2em]
\begingl
\gla Mary$_i$ ist sicher, $[\,$dass es den Hans nicht st\"oren w\"urde//
\glb Mary is sure $\hphantom{]\,}$that it the Hans not annoy would//
\moregl
\gla $[\,$seiner Freundin ihr$_i$ Herz auszusch\"utten\/$\,]]\,$. //
\glb $\hphantom{[\,}$his girlfriend her heart {out to throw}//
\glft `Mary is sure that to reveal her heart to his girlfriend
would not damage John.'//
\endgl
\xe
|endcodedisplay

\noindent produces

\framedisplay
\ex[glstyle=multilevel,glbrackets,moregloffset=2em]
\begingl
\gla Mary$_i$ ist sicher, $[\,$dass es den Hans nicht st\"oren w\"urde//
\glb Mary is sure $\hphantom{]\,}$that it the Hans not annoy would//
\moregl
\gla $[\,$seiner Freundin ihr$_i$ Herz auszusch\"utten\/$\,]]\,$. //
\glb $\hphantom{[\,}$his girlfriend her heart {out to throw}//
\glft `Mary is sure that to reveal her heart to his girlfriend
would not damage John.'//
\endgl
\xe
\endframedisplay


\subsection  Gloss underfixes

Macro:\quad |\gluf|\par
\parinventory
& \idx{|glufcloseup|}& dimension& |.4ex|\cr
& \idx{|everygluf|}& token list& |{}|\cr
\endparinventory

\noindent Sometimes, gloss displays like the following are
desired, with grammatical markings written below the gloss.

\ex[glstyle=wrap,everygluf=\tenrm]
\gla Mary$_i$ ist sicher, dass es den Hans nicht st\"oren
w\"urde + seiner Freundin ihr$_i$ Herz auszusch\"utten.//
\glb Mary is sure that it \gluf{the}{ACC} Hans not annoy would
 \gluf{his}{DAT} \gluf{girlfriend}{DAT} \gluf{her}{ACC}
 \gluf{heart}{ACC}
{out to throw}//
\glft `Mary is sure that to reveal her heart to his girlfriend
would not damage John.'\endgraf//   %% PROBLEM
\xe
The grammatical markings are essentially ``underfixes'' (rather
than prefixes or suffixes), hence the name ``gluf'' (gl underfix).

It was produced by:

\codedisplay
\ex[everygluf=\tenrm]  % LaTex users should use \footnotesize
\gla Mary$_i$ ist sicher, dass es den Hans nicht st\"oren
   w\"urde + seiner Freundin ihr$_i$ Herz auszusch\"utten.//
\glb Mary is sure that it \gluf{the}{ACC} Hans not annoy would
   \gluf{his}{DAT} \gluf{girlfriend}{DAT} \gluf{her}{ACC}
   \gluf{heart}{ACC} {out to throw}//
\glc `Mary is sure that to reveal her heart to his girlfriend
   would not damage John.'//
\xe
|endcodedisplay

When the underfix is typeset, the value of |everygluf| is first
inserted.  It is provided so that the user has control of the
font used to typeset the tags. The value of |glufcloseup|
determines how much the baselineskip between the underfix and the
underfixed word is closed up.  Without some closeup, the
underfixes are not positioned close enough to the glosses they
modify (in my opinion). The macro |\gluf| positions the underfix,
centered, below the word it annotates.  Its syntax should be
clear from the example above.



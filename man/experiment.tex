
%% experiment with nlevel gloss syntax

\makeatletter

%\def\gln@begingl{\bgroup
%   \@glspacefalse \@getoptionalarg\gln@A}
%\def\gln@A{\@ifnextchar\@cs\gln@B\gln@C}
%# I can't remember the purpose of \@cs, leave it for now
%\def\gln@B#1{\gln@C}
%\def\gln@C{%
%   \ling@usearg
%   \ep@setglstrut
%   \ifdim\ling@glwidth=0pt
%      \bgroup
%   \else
%      \vtop\bgroup
%         \hsize=\ling@glwidth
%         \leftskip=0pt
%   \fi
%   \edef\gl@outerbaselineskip{\noexpand\baselineskip=\the\baselineskip}%
%   \futurelet\temp\gln@Ca
% }
%\def\gln@Ca{%
%   \ifx\temp\glpreamble \let\next=\relax
%   \else \ifx\temp\glilg \let\next=\gln@Cb
%   \else \let\next=\gln@Cc \fi\fi \next}
%\def\gln@Cb #1{\gln@Cc}
%\def\gln@Cc{%
%   \lineskip=\lingextraglskip
%   \rightskip=\ling@glrightskip
%   \ifdim\ling@glhangindent>0pt \hangindent=\ling@glhangindent
%      \hangafter=1 \fi
%   \leavevmode
%   \gln@a
%}
%\def\gln@preamble #1\glilg{%
%   {\ling@everyglpreamble #1\strut \vskip\lingbelowpreambleskip}%
%# body grouped so that everyglpreamble is scoped
%   \gln@Cc}
%\def\gln@ft{\vskip\lingaboveglftskip\strut
%   \gl@outerbaselineskip \ling@everyglft}
%\def\glilg{\relax}

\def\gln@printglword{%
   \if@glspace \hskip\lingglspace \else \@glspacetrue \fi
   \begingroup
   \gltoks@sofar={}%
   \lineskip=0pt
   \ling@everyglword
   \gl@loopmoretrue
   \loop\ifgl@loopmore
      \gl@lop\gln@aboveskiplist\to\@aboveskip
      \ifx\@aboveskip\empty \let\@above=\empty
      \else \edef\@above{\noalign{\vskip\@aboveskip}}\fi
      \gl@lopTL\gln@everyline\to\gltoks@every
      \gl@lopTL\tempa\to\gltoks@next
      \edef\temp{\the\gltoks@sofar \@above \glstrut \the\gltoks@every \the\gltoks@next \cr}%
      \gltoks@sofar=\expandafter{\temp}%
      \ifx\tempa\empty \gl@loopmorefalse \fi
      \repeat
   \vtop{%
      \lineskip=0pt
      \ling@everyglword
      \halign{\glwordalign{##}\cr \the\gltoks@sofar}}%
   \endgroup
}



%
%\lingset{extraglstrut=}
%\ep@setglstrut
%\writeln{height: \the\ht\glstrutbox, depth: \the\dp\glstrutbox}
%
%\lingset{extraglstrut=2pt 0pt}
%\ep@setglstrut
%\writeln{height: \the\ht\glstrutbox, depth: \the\dp\glstrutbox}
%
%\def\setglstrut{\ifx\lingextraglstrut\empty \glstrut=\strut \else
%   \expandafter\ep@adjustglstrut\lingextraglstrut\@nil
%
%\let\glstrut=\strut
%\ifx\lingextraglstrut\empty \else
%   \expandafter\ep@adjustglstrut\lingextraglstrut\@nil \fi
%\writeln{>>>>> \meaning\glstrut}
%\writeln{height: \the\ht\glstrutbox, depth: \the\dp\glstrutbox}
%
%\lingset{extraglstrut=3pt 2pt}
%\ifx\lingextraglstrut\empty \else
%   \expandafter\ep@adjustglstrut\lingextraglstrut\@nil \fi
%\writeln{height: \the\ht\glstrutbox, depth: \the\dp\glstrutbox}






\resetatcatcode

